(()=>{var an=Object.create;var ce=Object.defineProperty;var un=Object.getOwnPropertyDescriptor;var cn=Object.getOwnPropertyNames;var ln=Object.getPrototypeOf,dn=Object.prototype.hasOwnProperty;var z=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw new Error('Dynamic require of "'+e+'" is not supported')});var le=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),fn=(e,t)=>{for(var r in t)ce(e,r,{get:t[r],enumerable:!0})},hn=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of cn(t))!dn.call(e,o)&&o!==r&&ce(e,o,{get:()=>t[o],enumerable:!(n=un(t,o))||n.enumerable});return e};var de=(e,t,r)=>(r=e!=null?an(ln(e)):{},hn(t||!e||!e.__esModule?ce(r,"default",{value:e,enumerable:!0}):r,e));var ht=le(T=>{"use strict";T.__esModule=!0,T.LoggerFactory=T.logLevels=void 0,T.logLevels={log_raise_error:1,log_with_warnings:2,trace:3,debug:4,info:5,warn:6,error:7,disable:8};var pn=function(){function e(t,r){if(t===void 0&&(t="log_with_warnings"),r===void 0&&(r=null),this.logLevel=t,!T.logLevels[t])throw Error("Invalid log level "+t+" allowed: "+JSON.stringify(T.logLevels));this.mockConsole=r||console}return e.prototype.dummy=function(){},e.prototype.setLogWarnings=function(t){this.logLevel=t},e.prototype.getLogWarnings=function(){return this.logLevel},e.prototype.getSingleLoggerColor=function(t,r,n){return this.getSingleLoggerStyle(t,this.getColorStyle(r),n)},e.prototype.getSingleLogger=function(t,r){var n=this.getRandomColor(t);return this.getSingleLoggerStyle(t,this.getColorStyle(n),r)},e.prototype.getSingleLoggerStyle=function(t,r,n,o){var s=this;return o===void 0&&(o="log_with_warnings"),function(){for(var a=[],d=0;d<arguments.length;d++)a[d]=arguments[d];if(T.logLevels[s.logLevel]>T.logLevels[o])return s.dummy;for(var g=Array.prototype.slice.call(a),f=g.shift().split("{}"),i=[s.mockConsole,"%c"+t,r],u=0;u<f.length;u++)i.push(f[u]),g[u]!==void 0&&i.push(g[u]);if(f.length-1!==g.length){if(s.logLevel==="log_with_warnings")s.mockConsole.error("MissMatch amount of arguments");else if(s.logLevel==="log_raise_error")throw new Error("MissMatch amount of arguments")}return Function.prototype.bind.apply(n,i)}},e.prototype.getLoggerColor=function(t,r){return this.getLoggerStyle(t,this.getColorStyle(r))},e.prototype.getColorStyle=function(t){return"color: white; background-color: "+t+"; padding: 2px 6px; border-radius: 2px; font-size: 10px"},e.getHash=function(t,r){r===void 0&&(r=0);for(var n=3735928559^r,o=1103547991^r,s=0,a=void 0;s<t.length;s++)a=t.charCodeAt(s),n=Math.imul(n^a,2654435761),o=Math.imul(o^a,1597334677);return n=Math.imul(n^n>>>16,2246822507)^Math.imul(o^o>>>13,3266489909),4294967296*(2097151&(o=Math.imul(o^o>>>16,2246822507)^Math.imul(n^n>>>13,3266489909)))+(n>>>0)},e.prototype.getRandomColor=function(t){t===void 0&&(t="");for(var r=e.getHash(t),n="#",o=0;o<3;o++)n+=("00"+(8+(r>>7*o&127)).toString(16)).substr(-2);return n},e.prototype.getLogger=function(t){return this.getLoggerColor(t,this.getRandomColor(t))},e.prototype.getLoggerStyle=function(t,r){return{trace:this.getSingleLoggerStyle(t,r,this.mockConsole.trace,"trace"),debug:this.getSingleLoggerStyle(t,r,this.mockConsole.debug,"debug"),log:this.getSingleLoggerStyle(t,r,this.mockConsole.log,"info"),warn:this.getSingleLoggerStyle(t,r,this.mockConsole.warn,"warn"),error:this.getSingleLoggerStyle(t,r,this.mockConsole.error,"error")}},e}();T.LoggerFactory=pn});var $r=le((Vr,Te)=>{(function(e){typeof Vr=="object"&&typeof Te<"u"?Te.exports=e():typeof define=="function"&&define.amd?define([],e):(typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this).EventEmitter3=e()})(function(){return function e(t,r,n){function o(d,g){if(!r[d]){if(!t[d]){var f=typeof z=="function"&&z;if(!g&&f)return f(d,!0);if(s)return s(d,!0);var i=new Error("Cannot find module '"+d+"'");throw i.code="MODULE_NOT_FOUND",i}var u=r[d]={exports:{}};t[d][0].call(u.exports,function(l){return o(t[d][1][l]||l)},u,u.exports,e,t,r,n)}return r[d].exports}for(var s=typeof z=="function"&&z,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,o="~";function s(){}function a(i,u,l){this.fn=i,this.context=u,this.once=l||!1}function d(i,u,l,_,E){if(typeof l!="function")throw new TypeError("The listener must be a function");var S=new a(l,_||i,E),y=o?o+u:u;return i._events[y]?i._events[y].fn?i._events[y]=[i._events[y],S]:i._events[y].push(S):(i._events[y]=S,i._eventsCount++),i}function g(i,u){--i._eventsCount==0?i._events=new s:delete i._events[u]}function f(){this._events=new s,this._eventsCount=0}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(o=!1)),f.prototype.eventNames=function(){var i,u,l=[];if(this._eventsCount===0)return l;for(u in i=this._events)n.call(i,u)&&l.push(o?u.slice(1):u);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(i)):l},f.prototype.listeners=function(i){var u=o?o+i:i,l=this._events[u];if(!l)return[];if(l.fn)return[l.fn];for(var _=0,E=l.length,S=new Array(E);_<E;_++)S[_]=l[_].fn;return S},f.prototype.listenerCount=function(i){var u=o?o+i:i,l=this._events[u];return l?l.fn?1:l.length:0},f.prototype.emit=function(i,u,l,_,E,S){var y=o?o+i:i;if(!this._events[y])return!1;var b,p=this._events[y],C=arguments.length;if(p.fn){switch(p.once&&this.removeListener(i,p.fn,void 0,!0),C){case 1:return p.fn.call(p.context),!0;case 2:return p.fn.call(p.context,u),!0;case 3:return p.fn.call(p.context,u,l),!0;case 4:return p.fn.call(p.context,u,l,_),!0;case 5:return p.fn.call(p.context,u,l,_,E),!0;case 6:return p.fn.call(p.context,u,l,_,E,S),!0}for(P=1,b=new Array(C-1);P<C;P++)b[P-1]=arguments[P];p.fn.apply(p.context,b)}else for(var R,L=p.length,P=0;P<L;P++)switch(p[P].once&&this.removeListener(i,p[P].fn,void 0,!0),C){case 1:p[P].fn.call(p[P].context);break;case 2:p[P].fn.call(p[P].context,u);break;case 3:p[P].fn.call(p[P].context,u,l);break;case 4:p[P].fn.call(p[P].context,u,l,_);break;default:if(!b)for(R=1,b=new Array(C-1);R<C;R++)b[R-1]=arguments[R];p[P].fn.apply(p[P].context,b)}return!0},f.prototype.on=function(i,u,l){return d(this,i,u,l,!1)},f.prototype.once=function(i,u,l){return d(this,i,u,l,!0)},f.prototype.removeListener=function(i,u,l,_){var E=o?o+i:i;if(!this._events[E])return this;if(!u)return g(this,E),this;var S=this._events[E];if(S.fn)S.fn!==u||_&&!S.once||l&&S.context!==l||g(this,E);else{for(var y=0,b=[],p=S.length;y<p;y++)(S[y].fn!==u||_&&!S[y].once||l&&S[y].context!==l)&&b.push(S[y]);b.length?this._events[E]=b.length===1?b[0]:b:g(this,E)}return this},f.prototype.removeAllListeners=function(i){var u;return i?(u=o?o+i:i,this._events[u]&&g(this,u)):(this._events=new s,this._eventsCount=0),this},f.prototype.off=f.prototype.removeListener,f.prototype.addListener=f.prototype.on,f.prefixed=o,f.EventEmitter=f,t!==void 0&&(t.exports=f)},{}]},{},[1])(1)})});var tn=le((Au,en)=>{en.exports=ro;var Jr=["auxclick","click","contextmenu","dblclick","keydown","keyup","mousedown","mouseup","touchend"];function ro(){let e=window.webkitAudioContext;if(!(navigator.maxTouchPoints>0&&e!=null))return;let r="blocked",n="blocked",o,s,a,d=new e().sampleRate,g=f(d);Jr.forEach(E=>{window.addEventListener(E,i,{capture:!0,passive:!0})});function f(E){let S=new ArrayBuffer(10),y=new DataView(S);return y.setUint32(0,E,!0),y.setUint32(4,E,!0),y.setUint16(8,1,!0),`data:audio/wav;base64,UklGRisAAABXQVZFZm10IBAAAAABAAEA${window.btoa(String.fromCharCode(...new Uint8Array(S))).slice(0,13)}AgAZGF0YQcAAACAgICAgICAAAA=`}function i(E){r==="blocked"&&(r="pending",u()),n==="blocked"&&(n="pending",l())}function u(){o=document.createElement("audio"),o.setAttribute("x-webkit-airplay","deny"),o.preload="auto",o.loop=!0,o.src=g,o.load(),o.play().then(()=>{r="allowed",_()},()=>{r="blocked",o.pause(),o.removeAttribute("src"),o.load(),o=null})}function l(){s=new e,a=s.createBufferSource(),a.buffer=s.createBuffer(1,1,22050),a.connect(s.destination),a.start(),s.state==="running"?(n="allowed",_()):(n="blocked",a.disconnect(s.destination),a=null,s.close(),s=null)}function _(){r!=="allowed"||n!=="allowed"||Jr.forEach(E=>{window.removeEventListener(E,i,{capture:!0,passive:!0})})}}});var Pt=de(ht(),1),fe,pt,he,gt,pe,mt,ge,St,me,_t,Se,Et,yt,_e,Ee,gn=goog.define("PRODUCTION",!1);if(gn)fe=e=>t=>{},pt=e=>t=>{},he=e=>t=>{},gt=e=>t=>{},pe=e=>t=>{},mt=e=>t=>{},ge=e=>t=>{},St=e=>t=>{},me=e=>t=>{},_t=e=>t=>{},Se=e=>t=>{},Et=e=>t=>{},yt=e=>t=>{},_e=e=>t=>{},Ee=e=>t=>{};else{let e=new Pt.default.LoggerFactory,t=e.getLoggerColor("index.js","#1E88E5"),r=e.getLoggerColor("WorkletMain","#6D4C41"),n=e.getLoggerColor("WorkletWorker","#D7CCC8"),o=e.getLoggerColor("Sab_Main","#000000"),s=e.getLoggerColor("Sab_Worker","#222222"),a=e.getLoggerColor("Van_Main","#F4511E"),d=e.getLoggerColor("Van_Worker","#FFAB91"),g=e.getLoggerColor("OldSpn_Main","#8E24AA"),f=e.getLoggerColor("OldSpn_Worker","#E1BEE7"),i=e.getLoggerColor("WorkletSinglethread_Main","#1E88E5"),u=e.getLoggerColor("WorkletSinglethread_Worker","#90CAF9"),l=e.getLoggerColor("common.utils.js","#FFD600"),_=e.getLoggerColor("module.js","#FFF59D"),E=e.getLoggerColor("utils/request-midi.js","#FFD600");fe=r.log,pt=n.log,he=o.log,gt=s.log,pe=a.log,mt=d.log,ge=g.log,St=f.log,me=t.log,_t=(...S)=>()=>console.log(...S),Se=i.log,Et=u.log,yt=l.log,_e=_.log,Ee=E.log}var It=e=>()=>e.exports.csoundCreateWasi();It.toString=()=>"create = async () => undefined;";var At=e=>t=>e.exports.csoundDestroy(t);At.toString=()=>"destroy = async () => undefined;";var xt=e=>()=>e.exports.csoundGetAPIVersion();xt.toString=()=>"getAPIVersion = async () => Number;";var bt=e=>()=>e.exports.csoundGetVersion();bt.toString=()=>"getVersion = async () => Number;";var Ct=e=>(t,r)=>e.exports.csoundInitialize(r);Ct.toString=()=>"initialize = async () => Number;";var vt=goog.define("WITH_TEXT_ENCODER_POLYFILL",!1);function Tt(){return this.encoding="utf8",this}Tt.prototype.encode=function(e){if(typeof e!="string")throw new TypeError("passed argument must be of type string "+e+" "+typeof e);let t=unescape(encodeURIComponent(e)),r=new Uint8Array(t.length);return[...t].forEach(function(n,o){r[o]=n.codePointAt(0)}),r};function mn(){this.encoding="utf-8",this.ignoreBOM=!1,this.trimNull=e=>{let t=e.indexOf("\0");return t>-1?e.slice(0,Math.max(0,t)):e},this.decode=function(e,t){if(typeof e>"u")return"";if(typeof(typeof t<"u"&&"stream"in t?t.stream:!1)!="boolean")throw new TypeError("stream option must be boolean");if(ArrayBuffer.isView(e)){let n=new Uint8Array(e.buffer,e.byteOffset,e.byteLength),o=Array.from({length:n.length});return n.forEach(function(s,a){o[a]=String.fromCodePoint(s)}),this.trimNull(o.join(""))}else throw new TypeError("passed argument must be an array buffer view")}}var X=vt?new mn:new TextDecoder("utf8"),W=vt?new Tt:new TextEncoder("utf8"),v=e=>X.decode(e);var k=e=>{let t=e.indexOf("\0");return t>-1?e.substr(0,t):e};var I=(e,t)=>{e.exports.freeStringMem(t)},kt=(e,t)=>{let{buffer:r}=e.wasi.memory,n=new Uint8Array(r,t),o=v(n);return k(o)},x=(e,t)=>{if(typeof t!="string"){console.error("Expected string but got",typeof t);return}let r=W.encode(t),n=e.exports.allocStringMem(r.length),{buffer:o}=e.wasi.memory;return new Uint8Array(o,n,r.length+1).set(r),n};var j=[["debug_mode","int"],["buffer_frames","int"],["hardware_buffer_frames","int"],["displays","int"],["ascii_graphs","int"],["postscript_graphs","int"],["message_level","int"],["tempo","int"],["ring_bell","int"],["use_cscore","int"],["terminate_on_midi","int"],["heartbeat","int"],["defer_gen01_load","int"],["midi_key","int"],["midi_key_cps","int"],["midi_key_oct","int"],["midi_key_pch","int"],["midi_velocity","int"],["midi_velocity_amp","int"],["no_default_paths","int"],["number_of_threads","int"],["syntax_check_only","int"],["csd_line_counts","int"],["compute_weights","int"],["realtime_mode","int"],["sample_accurate","int"],["sample_rate_override","MYFLT"],["control_rate_override","MYFLT"],["nchnls_override","int"],["nchnls_i_override","int"],["e0dbfs_override","MYFLT"],["daemon","int"],["ksmps_override","int"],["FFT_library","int"]],Q=[["device_name","char",64],["interface_name","char",64],["device_id","char",64],["midi_module","char",64],["isOutput","int"]],ye=[["type","int"],["lexme","ptr"],["value","int"],["fvalue","double"],["optype","ptr"],["next","ptr"]],Pe=[["type","int"],["value","ptr"],["rate","int"],["len","int"],["line","int"],["locn","uint64"],["left","ptr"],["right","ptr"],["next","ptr"],["markup","ptr"]];var Rt={0:"ROOT"},Y={int:4,uint64:8,MYFLT:8,char:1,double:8,ptr:4,void:8},w=e=>e.reduce((t,[r,n])=>Y[n]?Y[n]+t:w({TREE:Pe,ORCTOKEN:ye}[n])+t,0),Hi=w(Pe),Ki=w(ye),zi=w(j),Wt=w(Q);var Nt=(e,t,r)=>{let n=Rt[e.exports.orctokenGetType(r)],o=e.exports.orctokenGetValue(r),s=e.exports.orctokenGetFvalue(r),a=e.exports.orctokenGetOptype(r),d=e.exports.orctokenGetNext(r),g={type:n,value:o,fvalue:s,optype:a};return d>0&&(g.next=Nt(e,t,d)),g},q=(e,t,r)=>{let n=Rt[e.exports.treeStructGetType(r)],o=e.exports.treeStructGetValuePtr(r),s=e.exports.treeStructGetRate(r),a=e.exports.treeStructGetLen(r),d=e.exports.treeStructGetLine(r),g=e.exports.treeStructGetLocn(r),f=e.exports.treeStructGetLeftPtr(r),i=e.exports.treeStructGetRightPtr(r),u=e.exports.treeStructGetNextPtr(r),l={type:n,rate:s,len:a,line:d,locn:g};return o>0&&(l.value=Nt(e,t,o)),f>0&&(l.left=q(e,t,f)),i>0&&(l.right=q(e,t,i)),u>0&&(l.next=q(e,t,u)),l};var wt=e=>(t,r)=>{let n=x(e,r),o=e.exports.csoundParseOrc(t,n),{buffer:s}=e.wasi.memory,a=new DataView(s);return console.log(q(e,a,o)),I(e,n),o};wt.toString=()=>"parseOrc = async (orchestra) => Object;";var Ot=e=>(t,r)=>e.exports.csoundCompileTree(t,r);Ot.toString=()=>"compileTree = async (tree) => Number;";var Mt=e=>(t,r)=>{let n=x(e,r),o=e.exports.csoundCompileOrc(t,n);return I(e,n),o};Mt.toString=()=>"compileOrc = async (orchestra) => Number;";var Lt=e=>(t,r)=>{let n=x(e,r),o=e.exports.csoundEvalCode(t,n);return I(e,n),o};Lt.toString=()=>"csoundEvalCode = async (orchestra) => Number;";var Dt=e=>t=>e.exports.csoundStartWasi(t);Dt.toString=()=>"start = async () => Number;";var Gt=e=>(t,r)=>{let n=x(e,r),o;try{o=e.exports.csoundCompileCsd(t,n)}catch(s){console.error(s)}return I(e,n),o};Gt.toString=()=>"compileCsd = async (path) => Number;";var Ft=e=>(t,r)=>{let n=x(e,r),o=e.exports.csoundCompileCsdText(t,n);return I(e,n),o};Ft.toString=()=>"compileCsdText = async (csoundDocument) => Number;";var Bt=e=>t=>e.exports.csoundPerform(t);Bt.toString=()=>"perform = async () => Number;";var Ut=e=>t=>e.exports.csoundPerformKsmpsWasi(t);Ut.toString=()=>"performKsmps = async (csound) => Number;";var Ht=e=>t=>e.exports.csoundPerformBuffer(t);Ht.toString=()=>"performBuffer = async (csound) => Number;";var Kt=e=>t=>e.exports.csoundStop(t);Kt.toString=()=>"stop = async () => undefined;";var zt=e=>t=>e.exports.csoundCleanup(t);zt.toString=()=>"cleanup = async () => Number;";var jt=e=>t=>e.exports.csoundResetWasi(t);jt.toString=()=>"reset = async () => Number;";var J=(e,t)=>{let[r]=e.reduce(([n,o],[s,a,...d])=>{let g=a==="char"?Y[a]*d[0]:Y[a],f=a==="char"?k(v(t.subarray(o,g)))||"":t[o];return n[s]=f,[n,o+g]},[{},0]);return r};var qt=e=>t=>e.exports.csoundGetSr(t);qt.toString=()=>"getSr = async () => Number;";var Yt=e=>t=>e.exports.csoundGetKr(t);Yt.toString=()=>"getKr = async () => Number;";var Vt=e=>t=>e.exports.csoundGetKsmps(t);Vt.toString=()=>"getKsmps = async () => Number;";var $t=e=>t=>e.exports.csoundGetNchnls(t);$t.toString=()=>"getNchnls = async () => Number;";var Zt=e=>t=>e.exports.csoundGetNchnlsInput(t);Zt.toString=()=>"getNchnlsInput = async () => Number;";var Xt=e=>t=>e.exports.csoundGet0dBFS(t);Xt.toString=()=>"get0dBFS = async () => Number;";var Qt=e=>t=>e.exports.csoundGetA4(t);Qt.toString=()=>"getA4 = async () => Number;";var Jt=e=>t=>e.exports.csoundGetCurrentTimeSamples(t);Jt.toString=()=>"getCurrentTimeSamples = async () => Number;";var er=e=>t=>e.exports.csoundGetSizeOfMYFLT(t);er.toString=()=>"getSizeOfMYFLT = async () => Number;";var tr=e=>(t,r)=>{let n=x(e,r),o=e.exports.csoundSetOption(t,n);return I(e,n),o};tr.toString=()=>"setOption = async (option) => Number;";var rr=e=>(t,r)=>{e.exports.csoundSetParams(t,r)};rr.toString=()=>"setParams = async (csoundParams) => undefined;";var nr=e=>t=>{let{buffer:r}=e.wasi.memory,n=w(j),o=e.exports.allocCsoundParamsStruct(),s=new Uint8Array(r,o,n);e.exports.csoundGetParams(t,o);let a=J(j,s);return e.exports.freeCsoundParams(o),a};nr.toString=()=>"getParams = async () => CSOUND_PARAMS;";var or=e=>t=>e.exports.csoundGetDebug(t);or.toString=()=>"getDebug = async () => Number;";var sr=e=>(t,r)=>{e.exports.csoundSetDebug(t,r)};sr.toString=()=>"setDebug = async (number) => undefined;";var ir=e=>t=>e.exports.csoundGetInputBufferSize(t);ir.toString=()=>"getInputBufferSize = async () => Number;";var ar=e=>t=>e.exports.csoundGetOutputBufferSize(t);ar.toString=()=>"getOutputBufferSize = async () => Number;";var ur=e=>t=>e.exports.csoundGetInputBuffer(t);ur.toString=()=>"getInputBuffer = async () => Number;";var cr=e=>t=>e.exports.csoundGetOutputBuffer(t);cr.toString=()=>"getOutputBuffer = async () => Number;";var lr=e=>t=>e.exports.csoundGetSpin(t);lr.toString=()=>"getSpin = async (csound) => Number;";var dr=e=>t=>e.exports.csoundGetSpout(t);dr.toString=()=>"getSpout = async () => Number;";function A(e,t=[]){return(...r)=>(n=>n.length>=e.length?e(...n):A(e,n))([...t,...r])}var te=e=>Array.prototype.slice.call(e);function Sn(e,t,r){let n=e<0?r.length+e:e;if(e>=r.length||n<0)return r;let o=te(r);return o[n]=t(o[n]),o}var sa=A(Sn);function _n(e){return()=>e}var xe=Array.isArray;function En(e,t,r){return Object.assign({},r,{[e]:t})}var yn=A(En);function ee(e){return e<<0===e}var ia=Number.isInteger||ee;function mr(e,t,r){let n=typeof e=="string"?e.split(".").map(s=>ee(Number(s))?Number(s):s):e;if(n.length===0)return t;let o=n[0];if(n.length>1){let a=typeof r!="object"||r===null||!r.hasOwnProperty(o)?ee(n[1])?[]:{}:r[o];t=mr(Array.prototype.slice.call(n,1),t,a)}if(ee(o)&&xe(r)){let s=te(r);return s[o]=t,s}return yn(o,t,r)}var aa=A(mr);function Pn(e,t,r){if(e>t)throw new Error("min must not be greater than max in clamp(min, max, value)");if(r>=e&&r<=t)return r;if(r>t)return t;if(r<e)return e}var ua=A(Pn);function In(e,t,r){if(!xe(r))throw new TypeError("reduce: list must be array or iterable");let n=0,o=r.length;for(;n<o;)t=e(t,r[n],n,r),n++;return t}var An=A(In);function xn(e){return e==null||Number.isNaN(e)===!0}function be(e,t){return arguments.length===1?r=>be(e,r):xn(t)?e:t}function Ie(e){if(e===null)return"Null";if(e===void 0)return"Undefined";if(Number.isNaN(e))return"NaN";let t=Object.prototype.toString.call(e).slice(8,-1);return t==="AsyncFunction"?"Async":t}function bn(e,t){if(!xe(t))throw new Error(`Cannot read property 'indexOf' of ${t}`);let r=Ie(e);if(!["Object","Array","NaN","RegExp"].includes(r))return t.indexOf(e);let n=-1,o=-1,{length:s}=t;for(;++n<s&&o===-1;)D(t[n],e)&&(o=n);return o}function fr(e){let t=[],r;for(;!(r=e.next()).done;)t.push(r.value);return t}function Cn(e,t){if(e.size!==t.size)return!1;let r=fr(e.values()),n=fr(t.values());return r.filter(s=>bn(s,n)===-1).length===0}function hr(e){let t=e.__proto__.toString();return["Error","TypeError"].includes(t)?[t,e.message]:[]}function pr(e){return e.toDateString?[!0,e.getTime()]:[!1]}function gr(e){return e.constructor!==RegExp?[!1]:[!0,e.toString()]}function D(e,t){if(arguments.length===1)return f=>D(e,f);let r=Ie(e);if(r!==Ie(t))return!1;if(r==="Function")return e.name===void 0?!1:e.name===t.name;if(["NaN","Undefined","Null"].includes(r))return!0;if(r==="Number")return Object.is(-0,e)!==Object.is(-0,t)?!1:e.toString()===t.toString();if(["String","Boolean"].includes(r))return e.toString()===t.toString();if(r==="Array"){let f=Array.from(e),i=Array.from(t);if(f.toString()!==i.toString())return!1;let u=!0;return f.forEach((l,_)=>{u&&l!==i[_]&&!D(l,i[_])&&(u=!1)}),u}let n=gr(e),o=gr(t);if(n[0])return o[0]?n[1]===o[1]:!1;if(o[0])return!1;let s=pr(e),a=pr(t);if(s[0])return a[0]?s[1]===a[1]:!1;if(a[0])return!1;let d=hr(e),g=hr(t);if(d[0])return g[0]?d[0]===g[0]&&d[1]===g[1]:!1;if(r==="Set")return Cn(e,t);if(r==="Object"){let f=Object.keys(e);if(f.length!==Object.keys(t).length)return!1;let i=!0;return f.forEach(u=>{if(i){let l=e[u],_=t[u];l!==_&&!D(l,_)&&(i=!1)}}),i}return!1}function Ae(e,t){if(arguments.length===1)return r=>Ae(e,r);if(!!t)return t[e]}function vn(e,t,r){return D(Ae(e,t),Ae(e,r))}var ca=A(vn);function Ce(e,t){if(arguments.length===1)return s=>Ce(e,s);if(t==null)return;let r=t,n=0,o=typeof e=="string"?e.split("."):e;for(;n<o.length;){if(r==null||r[o[n]]===null)return;r=r[o[n]],n++}return r}function Tn(e,t,r){return(...n)=>(typeof e=="boolean"?e:e(...n))===!0?t(...n):r(...n)}var la=A(Tn);function kn(e,t,r){let n=-1,{length:o}=e;r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;let s=Array(o);for(;++n<o;)s[n]=e[n+t];return s}function Sr(e,t){return arguments.length===1?r=>Sr(e,r):t!=null&&t.constructor===e||t instanceof e}function Rn(e,t,r){let n=te(r);return e===-1?n.fill(t,e):n.fill(t,e,e+1)}var da=A(Rn);function Wn(e,t,r){return e(r)>e(t)?r:t}var fa=A(Wn);function Nn(e,t,r){return e(r)<e(t)?r:t}var ha=A(Nn);function wn(e,t,r){if(e<0||t<0)throw new Error("Rambda.move does not support negative indexes");if(e>r.length-1||t>r.length-1)return r;let n=te(r);return n[e]=r[t],n[t]=r[e],n}var pa=A(wn);function _r(e,t){return arguments.length===1?r=>_r(e,r):e*t}var Er=e=>({x:e,map:t=>Er(t(e))});function On(e,t,r){return e(n=>Er(t(n)))(r).x}var Mn=A(On);function Ln(e,t,r){return D(Ce(e,r),t)}var ga=A(Ln);function Dn(e,t,r){return be(e,Ce(t,r))}var ma=A(Dn);var Sa=An(_r,1);function Gn(e,t,r){return r?r[e]===t:!1}var _a=A(Gn);function Fn(e,t,r){return Sr(e,r[t])}var Ea=A(Fn);function Bn(e,t,r){return r?be(e,r[t]):e}var ya=A(Bn);function ve(e,t){if(arguments.length===1)return o=>ve(e,o);if(Number.isNaN(Number(e))||Number.isNaN(Number(t)))throw new TypeError("Both arguments to range must be numbers");if(t<e)return[];let r=t-e,n=Array(r);for(let o=0;o<r;o++)n[o]=e+o;return n}function Un(e,t,r){return r.replace(e,t)}var Pa=A(Un);function Hn(e,t,r){return Mn(e,_n(t),r)}var Ia=A(Hn);function Kn(e,t,r){return r.slice(e,t)}var Aa=A(Kn);function yr(e,t){return arguments.length===1?r=>yr(e,r):e<0?t.slice():typeof t=="string"?t.slice(0,e):kn(t,0,e)}function zn(e,t,r){return e(r)?t(r):r}var xa=A(zn);function jn(e,t,r){return yr(t.length>r.length?r.length:t.length,t).map((n,o)=>e(n,r[o]))}var ba=A(jn);var Pr=e=>(t,r)=>{let{buffer:n}=e.wasi.memory,o=e.exports.csoundGetMIDIDevList(t,void 0,r?1:0);if(o===0)return[];let s=Wt,a=e.exports.allocCsMidiDeviceStruct(o);e.exports.csoundGetMIDIDevList(t,a,r?1:0);let d=new Uint8Array(n,a,s*o),g=ve(0,o).map(f=>J(Q,d.subarray(f*s,s)));return e.exports.freeCsMidiDeviceStruct(a),g};Pr.toString=()=>"getMIDIDevList = async (isOutput) => Object;";var Ir=e=>t=>{let{buffer:r}=e.wasi.memory,n=e.exports.getRtMidiName(t),o=new Uint8Array(r,n,128);return k(v(o))||""};Ir.toString=()=>"getRtMidiName = async () => String;";var Ar=e=>(t,r,n,o)=>{e.exports.pushMidiMessage(t,r,n,o)};Ar.toString=()=>"midiMessage = async (status, data1, data2) => undefined;";var xr=e=>(t,r)=>{let n=x(e,r),o=e.exports.csoundInputMessage(t,n);return I(e,n),o};xr.toString=()=>"inputMessage = async (scoreEvent) => Number;";var br=e=>(t,r)=>{let n=x(e,r),o=e.exports.csoundInputMessageAsync(t,n);return I(e,n),o};br.toString=()=>"inputMessageAsync = async (scoreEvent) => Number;";var Cr=e=>(t,r)=>{let n=x(e,r),o=e.exports.csoundGetControlChannelWasi(t,n);return I(e,n),o};Cr.toString=()=>"getControlChannel = async (channelName) => Number;";var vr=e=>(t,r,n)=>{let o=x(e,r);e.exports.csoundSetControlChannel(t,o,n),I(e,o)};vr.toString=()=>"setControlChannel = async (channelName, value) => void;";var Tr=e=>(t,r)=>{let n=x(e,r),o=e.exports.csoundGetStringChannelWasi(t,n),s=kt(e,o);return I(e,n),I(e,o),s};Tr.toString=()=>"getStringChannel = async (channelName) => String;";var kr=e=>(t,r,n)=>{let o=x(e,r),s=x(e,n);e.exports.csoundSetStringChannel(t,o,s),I(e,o),I(e,s)};kr.toString=()=>"setStringChannel = async (channelName, value) => void;";var Rr=e=>t=>{let{buffer:r}=e.wasi.memory,n=e.exports.csoundGetOutputName(t),o=new Uint8Array(r,n,64);return k(v(o))||""};Rr.toString=()=>"getOutputName = async () => String;";var Wr=e=>t=>{let{buffer:r}=e.wasi.memory,n=e.exports.csoundGetInputName(t),o=new Uint8Array(r,n,64);return k(v(o))||""};Wr.toString=()=>"getInputName = async (csound) => String;";var Nr=e=>(t,r,n)=>{let o=x(e,r),s=x(e,n),a=e.exports.csoundAppendEnv(t,o,s);return I(e,o),I(e,s),a};Nr.toString=()=>"appendEnv = async (csound, variable, value) => Number;";var wr=e=>t=>e.exports.csoundIsScorePending(t);wr.toString=()=>"isScorePending = async () => Number;";var Or=e=>(t,r)=>e.exports.csoundSetScorePending(t,r);Or.toString=()=>"setScorePending = async (pending) => Number;";var Mr=e=>(t,r)=>{let n=x(e,r),o=e.exports.csoundReadScore(t,n);return I(e,n),o};Mr.toString=()=>"readScore = async (score) => Number;";var Lr=e=>t=>e.exports.csoundGetScoreTime(t);Lr.toString=()=>"getScoreTime = async () => Number;";var Dr=e=>t=>e.exports.csoundGetScoreOffsetSeconds(t);Dr.toString=()=>"getScoreOffsetSeconds = async () => Number;";var Gr=e=>(t,r)=>e.exports.csoundSetScoreOffsetSeconds(t,r);Gr.toString=()=>"setScoreOffsetSeconds = async () => Number;";var Fr=e=>t=>e.exports.csoundRewindScore(t);Fr.toString=()=>"rewindScore = async () => undefined;";var Br=e=>(t,r)=>e.exports.csoundTableLength(t,r);Br.toString=()=>"tableLength = async (tableNum) => Number;";var Ur=e=>(t,r,n)=>e.exports.csoundTableGet(t,r,n);Ur.toString=()=>"tableGet = async (tableNum, tableIndex) => Number;";var Hr=e=>(t,r,n,o)=>e.exports.csoundTableSet(t,r,n,o);Hr.toString=()=>"tableSet = async (tableNum, tableIndex, value) => undefined;";var Kr=e=>(t,r,n)=>{let o=e.exports.allocFloatArray(n.length);new Float64Array(e.wasi.memory.buffer,o,n.length).set(n),e.exports.csoundTableCopyIn(t,r,o),e.exports.freeFloatArrayMem(o)};Kr.toString=()=>"tableCopyIn = async (tableNum, float64Array) => undefined;";var re=e=>(t,r)=>{let n=e.exports.csoundTableLength(t,r);if(n>0){let o=e.exports.allocFloatArray(n);e.exports.csoundTableCopyOut(t,r,o);let{buffer:s}=e.wasi.memory,a=new Float64Array(s,o,n),d=new Float64Array(a.length);for(let g=0;g<a.length;g++)d[g]=a[g];return e.exports.freeFloatArrayMem(o),d}};re.toString=()=>"tableCopyOut = async (tableNum) => ?Float64Array;";var zr=re;zr.toString=re.toString;var jr=e=>(t,r)=>{let n=e.exports.allocFloatArray(1024);e.exports.csoundGetTableArgs(t,n,r);let{buffer:o}=e.wasi.memory,s=new Float64Array(o,n,1024);return e.exports.freeFloatArrayMem(n),s};jr.toString=()=>"getTableArgs = async (tableNum) => ?Float64Array;";var qr=e=>(t,r)=>e.exports.csoundIsNamedGEN(t,r);qr.toString=()=>"isNamedGEN = async (tableNum) => number;";var Yr=e=>(t,r)=>{let n=e.exports.csoundIsNamedGEN(t,r);if(n>0){let o=e.exports.allocStringMem(n);e.exports.csoundGetNamedGEN(t,o,r,n);let{buffer:s}=e.wasi.memory,a=new Uint8Array(s,o,n);return v(a)}};Yr.toString=()=>"getNamedGEN = async (tableNum) => ?string;";function qn(e){return(t,r,n)=>{let o=typeof n=="string"?W.encode(n):n;e.wasi.writeFile(r,o)}}qn.toString=()=>"async (path, data) => void";function Yn(e){return(t,r,n)=>{let o=typeof n=="string"?W.encode(n):n;e.wasi.appendFile(r,o)}}Yn.toString=()=>"async (path, data) => void";function Vn(e){return(t,r)=>e.wasi.readFile(r)}Vn.toString=()=>"async (path) => ?Uint8Array";function $n(e){return(t,r)=>e.wasi.unlink(r)}$n.toString=()=>"async (path) => void";function Zn(e){return(t,r)=>e.wasi.readdir(r)}Zn.toString=()=>"async (path) => string[]";function Xn(e){return(t,r)=>e.wasi.mkdir(r)}Xn.toString=()=>"async (path) => void";goog.declareModuleId("libcsound");var eo=de($r(),1);var Pu=goog.require("worker.vanilla");var sn=de(tn(),1);var Gu=goog.require("worker.sab");var qu=goog.require("worker.worklet");var ec=goog.require("worker.old_spn");var lt={};fn(lt,{RIGHTS_ALL:()=>U,RIGHTS_BLOCK_DEVICE_BASE:()=>ai,RIGHTS_BLOCK_DEVICE_INHERITING:()=>ui,RIGHTS_CHARACTER_DEVICE_BASE:()=>ci,RIGHTS_CHARACTER_DEVICE_INHERITING:()=>li,RIGHTS_DIRECTORY_BASE:()=>nn,RIGHTS_DIRECTORY_INHERITING:()=>di,RIGHTS_REGULAR_FILE_BASE:()=>ue,RIGHTS_REGULAR_FILE_INHERITING:()=>et,RIGHTS_SOCKET_BASE:()=>fi,RIGHTS_SOCKET_INHERITING:()=>hi,RIGHTS_TTY_BASE:()=>pi,RIGHTS_TTY_INHERITING:()=>gi,WASI_CLOCK_MONOTONIC:()=>rt,WASI_CLOCK_PROCESS_CPUTIME_ID:()=>nt,WASI_CLOCK_REALTIME:()=>tt,WASI_CLOCK_THREAD_CPUTIME_ID:()=>ot,WASI_DIRCOOKIE_START:()=>Ci,WASI_E2BIG:()=>no,WASI_EACCES:()=>oo,WASI_EADDRINUSE:()=>so,WASI_EADDRNOTAVAIL:()=>io,WASI_EAFNOSUPPORT:()=>ao,WASI_EAGAIN:()=>uo,WASI_EALREADY:()=>co,WASI_EBADF:()=>V,WASI_EBADMSG:()=>lo,WASI_EBUSY:()=>fo,WASI_ECANCELED:()=>ho,WASI_ECHILD:()=>po,WASI_ECONNABORTED:()=>go,WASI_ECONNREFUSED:()=>mo,WASI_ECONNRESET:()=>So,WASI_EDEADLK:()=>_o,WASI_EDESTADDRREQ:()=>Eo,WASI_EDOM:()=>yo,WASI_EDQUOT:()=>Po,WASI_EEXIST:()=>Io,WASI_EFAULT:()=>Ao,WASI_EFBIG:()=>xo,WASI_EHOSTUNREACH:()=>bo,WASI_EIDRM:()=>Co,WASI_EILSEQ:()=>vo,WASI_EINPROGRESS:()=>To,WASI_EINTR:()=>ko,WASI_EINVAL:()=>Ro,WASI_EIO:()=>Wo,WASI_EISCONN:()=>No,WASI_EISDIR:()=>wo,WASI_ELOOP:()=>Oo,WASI_EMFILE:()=>Mo,WASI_EMLINK:()=>Lo,WASI_EMSGSIZE:()=>Do,WASI_EMULTIHOP:()=>Go,WASI_ENAMETOOLONG:()=>Fo,WASI_ENETDOWN:()=>Bo,WASI_ENETRESET:()=>Uo,WASI_ENETUNREACH:()=>Ho,WASI_ENFILE:()=>Ko,WASI_ENOBUFS:()=>zo,WASI_ENODEV:()=>jo,WASI_ENOENT:()=>qo,WASI_ENOEXEC:()=>Yo,WASI_ENOLCK:()=>Vo,WASI_ENOLINK:()=>$o,WASI_ENOMEM:()=>Zo,WASI_ENOMSG:()=>Xo,WASI_ENOPROTOOPT:()=>Qo,WASI_ENOSPC:()=>Jo,WASI_ENOSYS:()=>N,WASI_ENOTCAPABLE:()=>As,WASI_ENOTCONN:()=>es,WASI_ENOTDIR:()=>ts,WASI_ENOTEMPTY:()=>rs,WASI_ENOTRECOVERABLE:()=>ns,WASI_ENOTSOCK:()=>os,WASI_ENOTSUP:()=>ss,WASI_ENOTTY:()=>is,WASI_ENXIO:()=>as,WASI_EOVERFLOW:()=>us,WASI_EOWNERDEAD:()=>cs,WASI_EPERM:()=>ls,WASI_EPIPE:()=>ds,WASI_EPROTO:()=>fs,WASI_EPROTONOSUPPORT:()=>hs,WASI_EPROTOTYPE:()=>ps,WASI_ERANGE:()=>gs,WASI_EROFS:()=>ms,WASI_ESPIPE:()=>Ss,WASI_ESRCH:()=>_s,WASI_ESTALE:()=>Es,WASI_ESUCCESS:()=>m,WASI_ETIMEDOUT:()=>ys,WASI_ETXTBSY:()=>Ps,WASI_EVENTTYPE_CLOCK:()=>mi,WASI_EVENTTYPE_FD_READ:()=>Si,WASI_EVENTTYPE_FD_WRITE:()=>_i,WASI_EXDEV:()=>Is,WASI_FDFLAG_APPEND:()=>ri,WASI_FDFLAG_DSYNC:()=>ni,WASI_FDFLAG_NONBLOCK:()=>oi,WASI_FDFLAG_RSYNC:()=>si,WASI_FDFLAG_SYNC:()=>ii,WASI_FILESTAT_SET_ATIM:()=>Ei,WASI_FILESTAT_SET_ATIM_NOW:()=>yi,WASI_FILESTAT_SET_MTIM:()=>Pi,WASI_FILESTAT_SET_MTIM_NOW:()=>Ii,WASI_FILETYPE_BLOCK_DEVICE:()=>Zs,WASI_FILETYPE_CHARACTER_DEVICE:()=>Xs,WASI_FILETYPE_DIRECTORY:()=>Qs,WASI_FILETYPE_REGULAR_FILE:()=>oe,WASI_FILETYPE_SOCKET_DGRAM:()=>Js,WASI_FILETYPE_SOCKET_STREAM:()=>ei,WASI_FILETYPE_SYMBOLIC_LINK:()=>ti,WASI_FILETYPE_UNKNOWN:()=>$s,WASI_O_CREAT:()=>Ai,WASI_O_DIRECTORY:()=>st,WASI_O_EXCL:()=>xi,WASI_O_TRUNC:()=>bi,WASI_PREOPENTYPE_DIR:()=>it,WASI_RIGHT_FD_ADVISE:()=>ie,WASI_RIGHT_FD_ALLOCATE:()=>De,WASI_RIGHT_FD_DATASYNC:()=>Oe,WASI_RIGHT_FD_FDSTAT_SET_FLAGS:()=>G,WASI_RIGHT_FD_FILESTAT_GET:()=>F,WASI_RIGHT_FD_FILESTAT_SET_SIZE:()=>$e,WASI_RIGHT_FD_FILESTAT_SET_TIMES:()=>ae,WASI_RIGHT_FD_READ:()=>O,WASI_RIGHT_FD_READDIR:()=>Z,WASI_RIGHT_FD_SEEK:()=>Me,WASI_RIGHT_FD_SYNC:()=>se,WASI_RIGHT_FD_TELL:()=>Le,WASI_RIGHT_FD_WRITE:()=>$,WASI_RIGHT_PATH_CREATE_DIRECTORY:()=>Ge,WASI_RIGHT_PATH_CREATE_FILE:()=>Fe,WASI_RIGHT_PATH_FILESTAT_GET:()=>qe,WASI_RIGHT_PATH_FILESTAT_SET_SIZE:()=>Ye,WASI_RIGHT_PATH_FILESTAT_SET_TIMES:()=>Ve,WASI_RIGHT_PATH_LINK_SOURCE:()=>Be,WASI_RIGHT_PATH_LINK_TARGET:()=>Ue,WASI_RIGHT_PATH_OPEN:()=>He,WASI_RIGHT_PATH_READLINK:()=>Ke,WASI_RIGHT_PATH_REMOVE_DIRECTORY:()=>Xe,WASI_RIGHT_PATH_RENAME_SOURCE:()=>ze,WASI_RIGHT_PATH_RENAME_TARGET:()=>je,WASI_RIGHT_PATH_SYMLINK:()=>Ze,WASI_RIGHT_PATH_UNLINK_FILE:()=>Qe,WASI_RIGHT_POLL_FD_READWRITE:()=>B,WASI_RIGHT_SOCK_SHUTDOWN:()=>Je,WASI_SIGABRT:()=>xs,WASI_SIGALRM:()=>bs,WASI_SIGBUS:()=>Cs,WASI_SIGCHLD:()=>vs,WASI_SIGCONT:()=>Ts,WASI_SIGFPE:()=>ks,WASI_SIGHUP:()=>Rs,WASI_SIGILL:()=>Ws,WASI_SIGINT:()=>Ns,WASI_SIGKILL:()=>ws,WASI_SIGPIPE:()=>Os,WASI_SIGQUIT:()=>Ms,WASI_SIGSEGV:()=>Ls,WASI_SIGSTOP:()=>Ds,WASI_SIGTERM:()=>Gs,WASI_SIGTRAP:()=>Fs,WASI_SIGTSTP:()=>Bs,WASI_SIGTTIN:()=>Us,WASI_SIGTTOU:()=>Hs,WASI_SIGURG:()=>Ks,WASI_SIGUSR1:()=>zs,WASI_SIGUSR2:()=>js,WASI_SIGVTALRM:()=>qs,WASI_SIGXCPU:()=>Ys,WASI_SIGXFSZ:()=>Vs,WASI_STDERR_FILENO:()=>ki,WASI_STDIN_FILENO:()=>vi,WASI_STDOUT_FILENO:()=>Ti,WASI_WHENCE_CUR:()=>ut,WASI_WHENCE_END:()=>ct,WASI_WHENCE_SET:()=>at});typeof goog.global>"u"&&(goog.global={});typeof goog.global.BigInt>"u"&&(goog.global.BigInt=typeof BigInt<"u"?BigInt:Number);var m=0,no=1,oo=2,so=3,io=4,ao=5,uo=6,co=7,V=8,lo=9,fo=10,ho=11,po=12,go=13,mo=14,So=15,_o=16,Eo=17,yo=18,Po=19,Io=20,Ao=21,xo=22,bo=23,Co=24,vo=25,To=26,ko=27,Ro=28,Wo=29,No=30,wo=31,Oo=32,Mo=33,Lo=34,Do=35,Go=36,Fo=37,Bo=38,Uo=39,Ho=40,Ko=41,zo=42,jo=43,qo=44,Yo=45,Vo=46,$o=47,Zo=48,Xo=49,Qo=50,Jo=51,N=52,es=53,ts=54,rs=55,ns=56,os=57,ss=58,is=59,as=60,us=61,cs=62,ls=63,ds=64,fs=65,hs=66,ps=67,gs=68,ms=69,Ss=70,_s=71,Es=72,ys=73,Ps=74,Is=75,As=76,xs=0,bs=1,Cs=2,vs=3,Ts=4,ks=5,Rs=6,Ws=7,Ns=8,ws=9,Os=10,Ms=11,Ls=12,Ds=13,Gs=14,Fs=15,Bs=16,Us=17,Hs=18,Ks=19,zs=20,js=21,qs=22,Ys=23,Vs=24,$s=0,Zs=1,Xs=2,Qs=3,oe=4,Js=5,ei=6,ti=7,ri=1,ni=2,oi=4,si=8,ii=16,Oe=goog.global.BigInt(1),O=goog.global.BigInt(2),Me=goog.global.BigInt(4),G=goog.global.BigInt(8),se=goog.global.BigInt(16),Le=goog.global.BigInt(32),$=goog.global.BigInt(64),ie=goog.global.BigInt(128),De=goog.global.BigInt(256),Ge=goog.global.BigInt(512),Fe=goog.global.BigInt(1024),Be=goog.global.BigInt(2048),Ue=goog.global.BigInt(4096),He=goog.global.BigInt(8192),Z=goog.global.BigInt(16384),Ke=goog.global.BigInt(32768),ze=goog.global.BigInt(65536),je=goog.global.BigInt(131072),qe=goog.global.BigInt(262144),Ye=goog.global.BigInt(524288),Ve=goog.global.BigInt(1048576),F=goog.global.BigInt(2097152),$e=goog.global.BigInt(4194304),ae=goog.global.BigInt(8388608),Ze=goog.global.BigInt(16777216),Xe=goog.global.BigInt(33554432),Qe=goog.global.BigInt(67108864),B=goog.global.BigInt(134217728),Je=goog.global.BigInt(268435456),U=Oe|O|Me|G|se|Le|$|ie|De|Ge|Fe|Be|Ue|He|Z|Ke|ze|je|qe|Ye|Ve|F|ae|$e|Ze|Qe|Xe|B|Je,ai=U,ui=U,ci=U,li=U,ue=Oe|O|Me|G|se|Le|$|ie|De|F|$e|ae|B,et=goog.global.BigInt(0),nn=G|se|ie|Ge|Fe|Be|Ue|He|Z|Ke|ze|je|qe|Ye|Ve|F|ae|Ze|Qe|Xe|B,di=nn|ue,fi=O|G|$|F|B|Je,hi=U,pi=O|G|$|F|B,gi=goog.global.BigInt(0),tt=0,rt=1,nt=2,ot=3,mi=0,Si=1,_i=2,Ei=Math.trunc(1),yi=1<<1,Pi=1<<2,Ii=1<<3,Ai=Math.trunc(1),st=1<<1,xi=1<<2,bi=1<<3,it=0,Ci=0,vi=0,Ti=1,ki=2,at=0,ut=1,ct=2;var{normalizePath:H}=goog.require("goog.string.path"),h=goog.define("DEBUG_WASI",!1);function M(e){return/^\//g.test(e)?e:`/${e}`}function Ri(e){return e.replace(/^\//g,"")}function on(e){return(e&(O|Z))!==goog.global.BigInt(0)}function dt(){if(typeof performance>"u"||typeof performance.now>"u"){let e=Date.now();return Date.now()-e}else return performance.now()}function ft(e){let t=e.reduce((o,s)=>o+s.length,0);if(e.length===0)return;let r=new Uint8Array(t),n=0;for(let o of e)r.set(o,n),n+=o.length;return r}var c=function({preopens:e}){this.fd=Array.from({length:4}),this.fd[0]={fd:0,path:"/dev/stdin",seekPos:goog.global.BigInt(0),buffers:[]},this.fd[1]={fd:1,path:"/dev/stdout",seekPos:goog.global.BigInt(0),buffers:[]},this.fd[2]={fd:2,path:"/dev/stderr",seekPos:goog.global.BigInt(0),buffers:[]},this.fd[3]={fd:3,path:"/",seekPos:goog.global.BigInt(0),buffers:[]},this.getMemory=this.getMemory.bind(this),this.CPUTIME_START=0};c.prototype.start=function(e){this.CPUTIME_START=dt(),e.exports._start()};c.prototype.getImports=function(e){let t={},r=WebAssembly.Module.imports(e);for(let n of r)n.kind==="function"&&n.module.startsWith("wasi_")&&(typeof t[n.module]!="object"&&(t[n.module]={}),t[n.module][n.name]=this[n.name].bind(this));return t};c.prototype.setMemory=function(e){this.memory=e};c.prototype.getMemory=function(){return(!this.view||!this.view.buffer||!this.view.buffer.byteLength)&&(this.view=new DataView(this.memory.buffer)),this.view};c.prototype.msToNs=function(e){let t=Math.trunc(e),r=goog.global.BigInt(Math.round((e-t)*1e6));return goog.global.BigInt(t)*goog.global.BigInt(1e6)+r};c.prototype.now=function(e){switch(e){case rt:return Math.floor(dt());case tt:return this.msToNs(Date.now());case nt:case ot:return Math.floor(dt()-this.CPUTIME_START);default:return 0}};c.prototype.args_get=function(e,t){return h&&console.log("args_get",e,t,lt),m};c.prototype.args_sizes_get=function(e,t){return h&&console.log("args_sizes_get",e,t,arguments),m};c.prototype.clock_res_get=function(e,t){return h&&console.log("args_get",e,t,arguments),m};c.prototype.clock_time_get=function(e,t,r){h&&console.log("clock_time_get",e,t,r,arguments);let n=this.getMemory(),o=this.now(e);return n.setBigUint64(r,goog.global.BigInt(o),!0),m};c.prototype.environ_get=function(e,t){return h&&console.log("environ_get",e,t,arguments),m};c.prototype.environ_sizes_get=function(e,t){return h&&console.log("environ_sizes_get",e,t,arguments),m};c.prototype.fd_advise=function(e,t,r,n){return h&&console.log("fd_advise",e,t,r,n,arguments),N};c.prototype.fd_allocate=function(e,t,r){return h&&console.log("fd_allocate",e,t,r,arguments),N};c.prototype.fd_close=function(e){return h&&console.log("fd_close",e,arguments),m};c.prototype.fd_datasync=function(e){return h&&console.log("fd_datasync",e,arguments),m};c.prototype.fd_fdstat_get=function(e,t){h&&console.log("fd_fdstat_get",e,t,arguments);let r=this.getMemory();return r.setUint8(t+4,oe),r.setUint16(t+2,0,!0),r.setUint16(t+4,0,!0),r.setBigUint64(t+8,goog.global.BigInt(ue),!0),r.setBigUint64(t+8+8,goog.global.BigInt(et),!0),m};c.prototype.fd_fdstat_set_flags=function(e,t){return h&&console.log("fd_fdstat_set_flags",e,t,arguments),N};c.prototype.fd_fdstat_set_rights=function(e,t,r){return h&&console.log("fd_fdstat_set_rights",e,t,r,arguments),m};c.prototype.fd_filestat_get=function(e,t){h&&console.log("fd_filestat_get",e,t,arguments);let r=0;this.fd[e]&&(r=this.fd[e].buffers.reduce(function(o,s){return o+s?.byteLength?s?.byteLength:0},0));let n=this.getMemory();return n.setBigUint64(t,goog.global.BigInt(e),!0),t+=8,n.setBigUint64(t,goog.global.BigInt(e),!0),t+=8,n.setUint8(t,oe),t+=8,n.setBigUint64(t,goog.global.BigInt(1),!0),t+=8,n.setBigUint64(t,goog.global.BigInt(r),!0),t+=8,n.setBigUint64(t,this.msToNs(this.CPUTIME_START),!0),t+=8,n.setBigUint64(t,this.msToNs(this.CPUTIME_START),!0),t+=8,n.setBigUint64(t,this.msToNs(this.CPUTIME_START),!0),m};c.prototype.fd_filestat_set_size=function(e,t){return h&&console.log("fd_filestat_set_size",e,t,arguments),m};c.prototype.fd_filestat_set_times=function(e,t,r,n){return h&&console.log("fd_filestat_set_times",e,t,r,n,arguments),m};c.prototype.fd_pread=function(e,t,r,n,o){return h&&console.log("fd_pread",e,t,r,n,o,arguments),m};c.prototype.fd_prestat_dir_name=function(e,t,r){if(h&&console.log("fd_prestat_dir_name",e,t,r,this.fd[e]),!this.fd[e]&&!this.fd[e-1])return V;let{path:n}=this.fd[e],o=this.getMemory(),s=W.encode(n);return new Uint8Array(o.buffer).set(s,t),m};c.prototype.fd_prestat_get=function(e,t){if(h&&console.log("fd_prestat_get",e,t,this.fd[e]),!this.fd[e])return V;let{path:r}=this.fd[e],n=this.getMemory(),o=W.encode(r);return n.setUint8(t,it),n.setUint32(t+4,o.byteLength,!0),m};c.prototype.fd_pwrite=function(e,t,r,n,o){return console.log("fd_pwrite",e,t,r,n,o,arguments),m};c.prototype.fd_read=function(e,t,r,n){h&&console.log("fd_read",e,t,r,n,arguments);let o=this.fd[e]&&this.fd[e].buffers,s=o.reduce((i,u)=>i+u.length,0),a=this.getMemory();if(!o||o.length===0){console.error("Reading non existent file",e,this.fd[e]);return}let d=Number(this.fd[e].seekPos),g=0,f=!1;if(d>=s)return-1;for(let i=0;i<r;i++){let u=t+i*8,l=a.getUint32(u,!0),_=a.getUint32(u+4,!0);f||(g+=_,Array.from({length:_},(E,S)=>S).reduce((E,S)=>{if(f)return E;let[y,b]=E,p=0,C=0,R=!1,L=0,P=o[p]?o[p].byteLength:0;if(S===0)for(;!R;)P=o[p]?o[p].byteLength:0,L<=d&&P+L>d?(R=!0,C=d-L):(L+=P,p+=1);else p=y,C=b;return o[p]?(a.setUint8(l+S,o[p][C]),C+1>=o[p].byteLength?(p=y+1,C=0):C+=1):(a.setUint8(l+S,"\0"),d+=S,f=!0),[p,C]},[0,0]),f||(d+=_))}return this.fd[e].seekPos=goog.global.BigInt(d),a.setUint32(n,g,!0),m};c.prototype.fd_readdir=function(e,t,r,n,o){return h&&console.log("fd_readdir",e,t,r,n,o,arguments),m};c.prototype.fd_renumber=function(e,t){return h&&console.log("fd_renumber",e,t,arguments),m};c.prototype.fd_seek=function(e,t,r,n){h&&console.log("fd_seek",e,t,r,n,arguments);let o=this.getMemory();switch(r){case ut:{this.fd[e].seekPos=(this.fd[e].seekPos?this.fd[e].seekPos:goog.global.BigInt(0))+goog.global.BigInt(t);break}case ct:{let s=this.fd[e].writer?goog.global.BigInt(this.fd[e].writer.length):goog.global.BigInt(0);this.fd[e].seekPos=s+BigInt(t);break}case at:{this.fd[e].seekPos=BigInt(t);break}}return o.setBigUint64(n,this.fd[e].seekPos,!0),m};c.prototype.fd_sync=function(e){return h&&console.log("fd_sync",e,arguments),m};c.prototype.fd_tell=function(e,t){h&&console.log("fd_tell",e,t,arguments);let r=this.getMemory();return this.fd[e].seekPos||(this.fd[e].seekPos=goog.global.BigInt(0)),r.setBigUint64(t,this.fd[e].seekPos,!0),m};c.prototype.fd_write=function(e,t,r,n){h&&console.log("fd_write",{fd:e,iovs:t,iovsLength:r,nwritten:n});let o=!1,s=this.getMemory();this.fd[e].buffers=this.fd[e].buffers||[],this.fd[e].seekPos===goog.global.BigInt(0)&&this.fd[e].buffers.length>0&&(o=!0);let a=0;for(let d=0;d<r;d++){let g=t+d*8,f=s.getUint32(g,!0),i=s.getUint32(g+4,!0);a+=i;let u=new Uint8Array(s.buffer,f,i);o?this.fd[e].buffers.unshift(u.slice(0,i)):this.fd[e].buffers.push(u.slice(0,i))}return this.fd[e].seekPos+=goog.global.BigInt(a),s.setUint32(n,a,!0),[1,2].includes(e)&&console.log(X.decode(ft(this.fd[e].buffers))),m};c.prototype.path_create_directory=function(e,t,r){return h&&console.log("path_create_directory",e,t,r,arguments),m};c.prototype.path_filestat_get=function(e,t,r,n,o){return h&&console.log("path_filestat_get",e,t,r,n,o,arguments),m};c.prototype.path_filestat_set_times=function(e,t,r,n,o,s,a){return h&&console.log("path_filestat_set_times",e,t,r,n,o,s,a,arguments),m};c.prototype.path_link=function(e,t,r,n,o,s,a){return h&&console.log("path_link",e,t,r,n,o,s,a,arguments),m};c.prototype.path_open=function(e,t,r,n,o,s,a,d,g){h&&console.log("path_open",e,t,r,n,o,s,a,d,g,arguments);let f=this.getMemory(),i=(this.fd[e]||{path:"/"}).path,u=new Uint8Array(f.buffer,r,n),l=X.decode(u),_=M(goog.string.path.normalizePath(goog.string.path.join(e===3?"":i,l)));if(h&&console.log(";; opening path",_,"withREader",on(s)),_.startsWith("/..")||_==="/._"||_==="/.AppleDouble")return V;let E=Object.values(this.fd).find(b=>b.path===_&&Array.isArray(b.buffers)),S;E?S=E.fd:(S=this.fd.length,this.fd[S]={fd:S});let y="file";return this.fd[S]={...this.fd[S],path:_,type:y,seekPos:goog.global.BigInt(0),buffers:E?this.fd[S].buffers:[]},(o&st)!==0&&(y="dir"),on(s)&&h&&console.log("should open a read handle for",_),f.setUint32(g,S,!0),m};c.prototype.path_readlink=function(e,t,r,n,o,s){return h&&console.log("path_readlink",e,t,r,n,o,s,arguments),m};c.prototype.path_remove_directory=function(e,t,r){return h&&console.log("path_remove_directory",e,t,r),m};c.prototype.path_rename=function(e,t,r,n,o,s){return h&&console.log("path_rename",e,t,r,n,o,s,arguments),m};c.prototype.path_symlink=function(e,t,r,n,o){return h&&console.log("path_symlink",e,t,r,n,o,arguments),m};c.prototype.path_unlink_file=function(e,t,r){return e>3&&h&&console.log("path_unlink_file",e,t,r,arguments),m};c.prototype.poll_oneoff=function(e,t,r,n){return h&&console.log("poll_oneoff",e,t,r,n,arguments),m};c.prototype.proc_exit=function(e){return h&&console.log("proc_exit",e,arguments),m};c.prototype.proc_raise=function(e){return h&&console.log("proc_raise",e,arguments),m};c.prototype.random_get=function(e,t){return h&&console.log("random_get",e,t),m};c.prototype.sched_yield=function(){return h&&console.log("sched_yield",arguments),m};c.prototype.sock_recv=function(){return h&&console.log("sock_recv",arguments),N};c.prototype.sock_send=function(){return h&&console.log("sock_send",arguments),N};c.prototype.sock_shutdown=function(){return h&&console.log("sock_shutdown",arguments),N};c.prototype.findBuffers=function(e){let t=Object.values(this.fd).find(({path:r})=>r===e);return t&&t.buffers};c.prototype.readdir=function(e){let t=(M(H(e))+"/").replace("//","/"),r=[];return Object.values(this.fd).forEach(({path:n})=>!/\//g.test(n.replace(t,""))&&r.push(n)),r.map(n=>Ri(n.replace(t,""))).filter(n=>!!n)};c.prototype.writeFile=function(e,t){let r=M(H(e)),n=Object.keys(this.fd).length,o=Object.values(this.fd).find(({path:s})=>s===r);this.fd[n]={fd:n,path:r,seekPos:goog.global.BigInt(0),buffers:[t]},o&&delete this.fd[o]};c.prototype.appendFile=function(e,t){let r=M(H(e)),n=this.findBuffers(r);n?n.push(t):console.error(`Can't append to non-existing file ${e}`)};c.prototype.readFile=function(e){let t=M(H(e)),r=this.findBuffers(t);if(r)return ft(r)};c.prototype.readStdOut=function(){let e=Object.values(this.fd[0]),t=e&&e.buffers||[];return ft(t)};c.prototype.unlink=function(e){let t=M(H(e)),r=Object.values(this.fd).find(({path:n})=>n===t);r?delete this.fd[r]:console.error(`While trying to unlink ${t}, path not found`)};c.prototype.mkdir=function(e){let t=M(H(e)),r=[];if(Object.values(this.fd).forEach(({path:o})=>o.startsWith(t)&&r.push(o)),r.length>0)console.warn(`mkdir: path ${e} already exists`);else{let o=Object.keys(this.fd).length;this.fd[o]={fd:o,path:t}}};goog.require("Zlib");goog.require("Zlib.Inflate");var{assert:hc}=goog.require("goog.asserts");function K(){}K.prototype.ready=!1;K.prototype.port=void 0;K.prototype.post=()=>{};K.prototype.broadcastPlayState=()=>{};K.prototype.workerState=void 0;K.prototype.vanillaWorkerState=void 0;var Gc=goog.require("worklet.singlethread.worker");(0,sn.default)();var ol=goog.require("binary.wasm");})();
/*! unmute-ios-audio. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> */
